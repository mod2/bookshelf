{% load strip_time %}

<li data-reading-id="{{ reading.id }}" data-book-slug="{{ reading.book.slug }}" class="container{% if not reading.finished_date and reading.get_stale_period != 0 and reading.days_since_last_entry > reading.get_stale_period %} stale{% endif %}">
	{% if not reading.finished_date %}
	<div class="entry">
		<section class="page_number">{% if reading.latest_entry %}{{ reading.latest_entry.page_number }}{% else %}—{% endif %}</section>
		<section class="sub">
			<span class="left"><span class="pages">{{ reading.pages_left }}</span> to go</span>
			<span class="label">(end: <span class="total" data-end-page="{{ reading.end_page }}">{{ reading.end_page }})</span></span>
		</section>
	</div>
	{% endif %}

	<a class="title" href="{% url 'book' reading.book.slug reading.id %}">
		<span class="label title">{{ reading.book.title }}</span>
		{% if reading.book.author and title == 'History' or results %}<span class="author">{{ reading.book.author }}</span>{% endif %}
	</a>

	<a class="metadata" href="{% url 'book' reading.book.slug reading.id %}">
		{% if not reading.finished_date %}
		<span class="percentage">
			<span class="bar" style="width: {{ reading.percentage }}%;"></span>
		</span>
		{% endif %}

		<span class="info">
			{% if reading.finished_date %}
				{{ reading.total_pages }} pages,
				finished {{ reading.finished_date|date:"F j, Y" }}
				({% if reading.finished_date == reading.started_date %}1 day{% else %}{{ reading.started_date|timesince:reading.finished_date|strip_time:False }}{% endif %})
			{% else %}
			<span class="num">{{ reading.percentage }}</span><span class="percent-sign">%</span><span class="last-read"> — {{ reading.latest_entry.date|timesince|strip_time }}</span>
			{% endif %}
		</span>
	</a>
</li>
